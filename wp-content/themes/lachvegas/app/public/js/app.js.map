{"version":3,"sources":["src/js/app.js","src/js/app/log.js","src/js/app/model.js","src/js/app/utils.js","src/js/app/view.js","src/js/components/calendar.js","src/js/components/fortunecookie.js","src/js/components/index.js","src/js/components/infobox.js","src/js/components/menu.js","src/js/components/modal.js","src/js/components/poll.js","src/js/components/quiz.js","src/js/components/ticker.js","src/js/helpers/clickHelper.js","src/js/helpers/datetime.js","src/js/helpers/geometry.js","src/js/helpers/particle.js","src/js/helpers/text.js","src/js/helpers/textures.js","src/js/templates/dialog.js","src/js/templates/dialog/level_completed.js","src/js/templates/dialog/level_start.js","src/js/views/button.js","src/js/views/dialog.js","src/js/views/interface.js","src/js/views/label.js","src/js/views/template.js","src/js/views/tooltip.js"],"names":["App","_components","Components","getNodes","setupTheme","setupModalTriggers","each","i","node","component","data","undefined","app","e","console","warn","on","toggleClass","setTimeout","el","addClass","find","off","preventDefault","removeClass","id","$modal","currentTarget","window","init","__useDefault","Log","message","print","type","log","Model","options","utils","Utils","loadAsync","url","method","callback","scope","$","ajax","dataType","success","response","call","param","RegExp","encodeURIComponent","exec","location","search","decodeURIComponent","parent","self","path","cacheBust","appConfig","root","Math","random","canvas","document","createElement","WebGLRenderingContext","getContext","txt","isDevelopmentMode","params","View","name","$view","$el","html","$element","Calendar","FortuneCookie","hide","show","setCookie","cname","ca","cookie","split","length","c","charAt","substring","indexOf","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","obj","Object","assign","action","status","text","results_number","results","res","votes_percent","round","votes","css","width","error","InfoBox","Ticker","Menu","Modal","Poll","Quiz","$currentButtonTarget","boxes","collectBoxes","slideToggle","overlay","querySelector","answerID","getAnswerID","save","poll_id","poll_answer_id","val","user","answers","answerTexts","right","wrong","value","deactivateQuestion","closest","quiz_id","question_id","question_result","answer_id","answer_value","resultEl","answer_correct","push","checkSummary","selector","attr","questions","getSummaryText","correct_answers","filter","answer","ClickHelper","mouse","THREE","Vector2","points","mesh","helperPlane","plane","connectPoints","renderHelperPlane","initClickEvents","addEventListener","onDocumentMouseDown","groundFloor","PlaneGeometry","Mesh","MeshLambertMaterial","color","rotation","x","PI","scene","add","event","vector","Vector3","clientX","innerWidth","clientY","innerHeight","unproject","camera","dir","sub","position","normalize","distance","z","pos","clone","multiplyScalar","remove","shape","Shape","autoClose","createPointsGeometry","spacedPoints","createSpacedPointsGeometry","Line","LineBasicMaterial","linewidth","scale","set","p","JSON","stringify","updateMousePosition","get3dPointZAxis","y","renderPoints","intersects","raycaster","intersectObject","object","height","Datetime","time","min","floor","sec","toFixed","Geometry","radius","Color","circleGeometry","verticesArray","vertices","segments","angle","cos","sin","circleMaterial","LineDashedMaterial","transparent","opacity","dashSize","AU","gapSize","computeLineDistances","circleLine","LinePieces","Particle","size","properties","Text","font","isCenter","material","MeshPhongMaterial","shininess","loader","FontLoader","load","geometry","TextGeometry","curveSegments","weight","bevelThickness","bevelSize","bevelEnabled","center","castShadow","group","computeBoundingBox","textWidth","boundingBox","max","Textures","context","createCanvas","beginPath","arc","stroke","glowColor","abs","elapsedTime","clearCanvas","drawRadialGradient","drawCircle","clearColor","fillStyle","fillRect","lineWidth","shadowRadius","shadowColor","shadowBlur","strokeStyle","gradient","createRadialGradient","addColorStop","showShininess","moveTo","lineTo","texture","Texture","needsUpdate","template","title","content","moves","pushes","Button","isActive","$template","append","initEvents","$btn","level","Dialog","classes","TemplateLevelStart","TemplateLevelCompleted","className","prepareTemplate","render","nestedTemplate","DialogTemplate","resizeToContent","item","close","contentWidth","outerWidth","contentHeight","outerHeight","left","top","Interface","datetime","character","move","THREEx","FullScreen","available","activated","cancel","request","world","difficulty","getMinutesWithSeconds","Label","planetsystem","planetsystemName","toLowerCase","replace","planetName","orbitColors","systems","toString","toScreenPosition","Template","templates","pl_hostname","dist","PC","mass","pl_num","habitable","Tooltip"],"mappings":"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","file":"public/js/app.js","sourcesContent":["import $ from 'jquery';\n\n// Import all available Components\nimport Components from './components'; \n\n\nexport default class App {\n\n\n  constructor () {\n\n    this._components = Components; \n\n  }\n\n\n  init () {\n\n    this.getNodes();\n    this.setupTheme();\n    this.setupModalTriggers();\n\n  }\n\n\n  getNodes() {\n\n    $('[data-component]').each((i, node) => {\n\n      let component = $(node).data('component');\n\n      if (this._components[component] !== undefined) {\n\n        try {\n          \n          new (this._components[component])({ app: this, node: node });\n\n        } catch (e) {\n\n          console.warn('component ' + component + ' could not be called', e);\n\n        }\n\n      } else {\n\n        console.warn('component \"' + component + '\" does not have implementation ');\n\n      }\n\n    });\n\n  }\n\n\n  setupTheme () {\n\n    $('.search-label').on('click', () => {\n      $('.search-area').toggleClass('is-expanded');\n    });\n\n  }\n\n  setupModalTriggers () {\n\n\n    setTimeout(() => {\n\n      let el = $('#modal-1');\n      el.addClass('modal-show');\n\n      el.find('[data-modal-close]').off('click').on('click', (e) => {\n        e.preventDefault();\n        el.removeClass('modal-show');\n      });\n\n      $('.modal-overlay').on('click', (e) => {\n        e.preventDefault();\n        el.removeClass('modal-show');\n      });\n\n    }, 2000);\n\n\n    $('[data-modal]').each((i, el) => {\n      \n      let id = $(el).data('modal');\n      let $modal = $('#' + id);\n\n      $(el).on('click', (e) => {\n\n        $modal = $('#' + $(e.currentTarget).data('modal'));\n        $modal.addClass('modal-show');\n\n        $modal.find('[data-modal-close]').off('click').on('click', (e) => {\n          e.preventDefault();\n          $modal.removeClass('modal-show');\n        });\n\n        $('.modal-overlay').on('click', () => {\n          e.preventDefault();\n          $modal.removeClass('modal-show');\n        });\n\n      });\n\n    });\n\n  }\n\n};\n\nwindow.App = new App();\nwindow.App.init();\n","export var __useDefault = true;\n\nexport default class Log {\n\n  init () {}\n\n  info (message) {\n  \tthis.print(message, 'info');\n  }\n\n  error (message) {\n\t\tthis.print(message, 'error');\n  }\n\n  print (message, type = 'info') {\n  \tif (typeof(console) === 'object' && window.console.log) {\n  \t\tconsole.log(message);\n  \t}\n  }\n}","\n\nimport Log from './log';\nimport Utils from './utils';\n\nexport default class Model {\n\n\n\tconstructor ( options = {} ) {\n\n    this.app = options.app;\n\n    this.log = new Log();\n    this.utils = new Utils();\n\n\t}\n\n\n  save() {\n\n    console.log('saving data', this.data);\n\t\tthis.loadAsync(this.url, this.data);\n\n  }\n\n\n\n\tloadAsync(url, data = {}, method = 'post', callback = {}, scope = this) {\n\n    $.ajax({\n\n      url: url,\n      data: data,\n      dataType: 'json',\n      type: method,\n      success: response => {\n\n        if (response) {\n\n\t\t\t\t\tconsole.log(response);\n\n          if (typeof(callback) == 'function') {\n\n              callback.call(scope, response);\n\n          }\n\n        }\n\n\t\t\t}\n    });\n\n  }\n\n}\n","//import THREE from 'three.js';\n\nexport var __useDefault = true;\n\n\n/**\n * Utility class to be used for global functions\n */\n\nexport default class Utils {\n\n\tconstructor() {}\n\n\n\tgetParam (param){\n\n   \tif (param = (new RegExp('[?&]'+encodeURIComponent(param)+'=([^&]*)')).exec(location.search))\n      return decodeURIComponent(param[1]);\n\n\t}\n\n\tisIframe () {\n\n\t\treturn !(parent.location == self.location);\n\n\t}\n\n\n\turl ( path, cacheBust = false ) {\n\n\t\tif (appConfig.root) {\n\n\t\t\tlet url = appConfig.root + path;\n\n\t\t\tif (cacheBust)\n\t\t\t\treturn url + '?time=' + Math.random();\n\n\t\t\telse\n\t\t\t\treturn url;\n\n\t\t}\n\n\t}\n\n\n\t// derived from: https://github.com/mrdoob/three.js/blob/master/examples/js/Detector.js\n  isWebGLSupported() {\n\n    try {\n\n      let canvas = document.createElement(\"canvas\");\n      return !! window.WebGLRenderingContext && (canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\"));\n\n    } catch(e) { return false; }\n\n  }\n\n\n  debug(txt) {\n\n  \tif (window.isDevelopmentMode)\n  \t\tconsole.log(txt);\n\n  }\n\n\n\tloadAsynch (url, params, callback = {}) {\n\n\t\t$.ajax({\n\t\t\turl: url,\n\t\t\tdataType: 'json',\n\t\t\tdata: params,\n\t\t\tmethod: 'post',\n\t\t\tsuccess: function(data) {\n\t\t\t\tconsole.log(data);\n\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\n\t}\n\n\n}\n","export var __useDefault = true;\n\nimport Utils from './utils';\n\nimport Template from '../views/template';\n\n/**\n * View base class\n * Used for all DOM - related objects\n *\n */\n\nexport default class View {\n\n\tconstructor ( options = {} ) {\n\n\t\tthis.options = options;\n\t\tthis.app = options.app;\n\n\t\tthis.utils = new Utils();\n\n\t\tthis.name = '';\n\t\tthis.$view = ``;\n\n\t}\n\n\tsetData() {\n\n\t}\n\n\trender() {\n\n\t\tthis.$el = this.$view;\n\t\treturn this.$el;\n\n\t}\n\n\tgetHtml() {\n\n\t\treturn this.$el.html();\n\n\t}\n\n\tappendTo( $element ) {\n\n\n\n\t}\n\n}\n","export default class Calendar {\n\n  constructor ( options = {} ) {\n\n    console.log(options);\n\n  }\n\n}\n","import $ from 'jquery';\n\nexport default class FortuneCookie {\n\n    constructor ( options = {} ) {\n        this.node = $(options.node);\n        this.data = this.node.data('param');\n        this.url = this.node.data('url');\n\n        console.log(this.data);\n\n        this.init();\n    }\n\n    init() {\n\n        this.node.find('[data-button]').on('click', (e) => {\n            e.preventDefault();\n            $(e.currentTarget).hide();\n            this.node.find('[data-ribbon]').show();\n            this.setCookie('lv_fortune_cookie', 1, 1);\n        });\n\n    }\n\n    getCookie(cname) {\n        var name = cname + \"=\";\n        var ca = document.cookie.split(';');\n        for(var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) == ' ') {\n                c = c.substring(1);\n            }\n            if (c.indexOf(name) == 0) {\n                return c.substring(name.length, c.length);\n            }\n        }\n        return \"\";\n    }\n\n    setCookie(cname, cvalue, exdays) {\n        var d = new Date();\n        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n        var expires = \"expires=\"+d.toUTCString();\n        document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n    }\n\n\n  save( obj ) {\n\n    let data = Object.assign({}, { action: 'save_poll_result' }, obj);\n\n    $.ajax({\n      url: this.url,\n      dataType: 'json',\n      data: data,\n      type: 'POST',\n      success: (data) => {\n\n        this.node.removeClass('state-is-pending');\n\n        if (data.status) {\n          this.node.find('[data-results]').show();\n        }\n\n        if (data.data) {\n\n          setTimeout(() => {\n            $('[data-results-number]').text(data.data.results_number);\n\n            for (var i in data.data.results) {\n              var res = data.data.results[i];\n              var id = res.id;\n              var votes_percent = Math.round(res.votes * 100 / data.data.votes, 2);\n  \n              $('[data-results-item=\"'+ id +'\"]').css({width: votes_percent + '%'});\n              $('[data-results-item=\"'+ id +'\"]').text(votes_percent + '%');\n            }\n          }, 500);\n\n        }\n      }, \n      error: (error) => {\n        this.node.removeClass('state-is-pending');\n      }\n    });\n\n  } \n\n}\n","import InfoBox from './infobox';\nimport Calendar from './calendar';\nimport FortuneCookie from './fortunecookie';\nimport Menu from './menu';\nimport Modal from './modal';\nimport Poll from './poll';\nimport Ticker from './ticker';\nimport Quiz from './quiz';\n\nexport default { \n\n  FortuneCookie,\n  InfoBox,\n  Calendar,\n  Ticker,\n  Menu,\n  Modal,\n  Poll,\n  Quiz\n  \n}","import $ from 'jquery';\n\nexport default class InfoBox {\n\n    constructor ( options = {} ) {\n        this.node = $(options.node);\n        this.$currentButtonTarget = null;\n\n        console.log(this.data);\n\n        this.boxes = [\n            ''\n        ]\n\n        this.init();\n    }\n\n    init() {\n\n        this.collectBoxes();\n\n    }\n\n\n    collectBoxes() {\n\n        console.log('collecting boxes ...');\n\n    }\n\n}\n","import $ from 'jquery';\n\nexport default class Menu {\n\n  constructor ( options = {} ) {\n    this.node = $(options.node);\n    this.init();\n  }\n\n  init() {\n\n    this.node.find('.menu-icon').on('click', (e) => {\n      e.preventDefault();\n      this.node.find('.menu').slideToggle('fast');\n    });\n\n  }\n\n}\n","import $ from 'jquery';\n\nexport default class Modal {\n\n  constructor ( options = {} ) {\n    this.node = $(options.node);\n    this.init();\n  }\n\n  init() {\n\n    this.overlay = document.querySelector('.modal-overlay');\n\n    this.node.find('.modal__close').on('click', () => {\n      this.node.removeClass('modal-show');\n    });\n\n    this.node.on('click', () => {\n      \n    });\n\n  }\n\n}\n","import $ from 'jquery';\n\nexport default class Poll {\n\n  constructor ( options = {} ) {\n    this.node = $(options.node);\n    this.data = this.node.data('param');\n    this.url = this.node.data('url');\n    this.$currentButtonTarget = null;\n\n    console.log(this.data);\n\n    this.init();\n  }\n\n  init() {\n\n    this.node.find('[data-button]').on('click', (e) => {\n      e.preventDefault();\n\n      let answerID = this.getAnswerID();\n\n      if (!answerID) {\n        console.warn('Antwort fehlt');\n      } else {\n\n        this.node.addClass('state-is-pending');\n\n        this.save({\n          poll_id: this.data.id,\n          poll_answer_id: answerID //$el.data('answer-id'),\n        });\n      }\n\n    });\n\n  }\n\n\n  getAnswerID() {\n    let answerID = this.node.find(`[name=\"question_${this.data.id}\"]:checked`).val();\n\n    if (!answerID) {\n      return false;\n    }\n    return answerID;\n  }\n\n\n  save( obj ) {\n\n    let data = Object.assign({}, { action: 'save_poll_result' }, obj);\n\n    $.ajax({\n      url: this.url,\n      dataType: 'json',\n      data: data,\n      type: 'POST',\n      success: (data) => {\n\n        this.node.removeClass('state-is-pending');\n\n        if (data.status) {\n          this.node.find('[data-results]').show();\n        }\n\n        if (data.data) {\n\n          setTimeout(() => {\n            $('[data-results-number]').text(data.data.results_number);\n\n            for (var i in data.data.results) {\n              var res = data.data.results[i];\n              var id = res.id;\n              var votes_percent = Math.round(res.votes * 100 / data.data.votes, 2);\n  \n              $('[data-results-item=\"'+ id +'\"]').css({width: votes_percent + '%'});\n              $('[data-results-item=\"'+ id +'\"]').text(votes_percent + '%');\n            }\n          }, 500);\n\n        }\n      }, \n      error: (error) => {\n        this.node.removeClass('state-is-pending');\n      }\n    });\n\n  } \n\n}\n","import $ from 'jquery';\n\nexport default class Quiz {\n\n  constructor ( options = {} ) {\n    this.node = $(options.node);\n    this.data = this.node.data('param');\n    this.url = this.node.data('url');\n    this.$currentButtonTarget = null;\n\n    this.user = {\n      answers: []\n    };\n\n    this.answerTexts = {\n      right: [\"Richtig! \", \"Genau! \", \"Richtige Antwort. \"],\n      wrong: [\"Falsch! \"]\n    }\n\n    this.init();\n  }\n\n  init() {\n\n    this.node.find('[data-button]').on('click', (e) => {\n      e.preventDefault();\n      \n      let $el = $(e.currentTarget);\n      let value = $el.data('value');\n\n      this.$currentButtonTarget = $el;\n      this.deactivateQuestion($el.closest('[data-question-id]'));\n\n      this.save({\n        quiz_id: this.data.id,\n        question_id: $el.closest('[data-question-id]').data('question-id'),\n        question_result: $el.closest('[data-question-result]').data('question-result'),\n        answer_id: $el.data('answer-id'),\n        answer_value: value\n      });\n    });\n\n  }\n\n  save( obj ) {\n\n    let data = Object.assign({}, { action: 'add_quiz_result' }, obj);\n\n    $.ajax({\n      url: this.url,\n      dataType: 'json',\n      data: data,\n      type: 'POST',\n      success: (data) => {\n\n        if (data.status) {\n\n          let resultEl = this.$currentButtonTarget.closest('[data-question-id]').find('[data-answer-text]').show();\n\n          if (data.answer_correct) {\n            resultEl.find('[data-answer-pretext]').addClass('state-is-true').html('<i class=\"fa fa-check-circle\"></i>');\n            resultEl.find('[data-answer-right-wrong]').html(this.answerTexts.right[0]);\n          }\n          else {\n            resultEl.find('[data-answer-pretext]').addClass('state-is-false').html('<i class=\"fa fa-times-circle\"></i>');\n            resultEl.find('[data-answer-right-wrong]').html(this.answerTexts.wrong[0]);\n          }\n\n          this.user.answers.push({\n            question_id: obj.question_id,\n            answer_correct: data.answer_correct\n          });\n\n          resultEl.css('display', 'flex');\n          this.deactivateQuestion();\n          this.checkSummary();\n        }\n      }\n    });\n\n  } \n\n  deactivateQuestion(selector) {\n    $(selector).find('[data-button]').attr('disabled', 'disabled');\n  }\n\n  checkSummary() {\n    if (this.user.answers.length === this.data.questions.length) {\n      console.log('show results');\n\n      $('[data-summary-text]').html(this.getSummaryText({\n        correct_answers: this.user.answers.filter(answer => { return answer.answer_correct === true }).length,\n        questions: this.data.questions.length \n      }));\n\n    } else {\n      console.log('dont show results yet');\n    }\n  }\n\n  getSummaryText(obj = {}) {\n    return `Du hast ${obj.correct_answers} von ${obj.questions} richtig beantwortet.`;\n  }\n\n}\n","// import View from '../app/view';\n\nexport default class Ticker {\n\n  constructor ( options = {} ) {\n\n    console.log(options);\n\n  }\n\n}\n","\n/**\n * Helper class to define custom geometries used for THREE.js rendering\n */\nexport default class ClickHelper {\n\n\n  constructor ( options = {} ) {\n\n    this.app = options.app;\n    this.mouse = new THREE.Vector2();\n    //this.projector = new THREE.Projector();\n\n    this.points = [];\n    this.mesh = null;\n    this.helperPlane = options.plane || null;\n    this.connectPoints = true;\n\n    if (!this.helperPlane)\n      this.renderHelperPlane();\n\n    this.initClickEvents();\n\n  }\n\n\n\tinitClickEvents () {\n\n    document.addEventListener( 'mousedown', (e) => this.onDocumentMouseDown(e), false );\n\n\t}\n\n\n  renderHelperPlane() {\n\n    this.groundFloor = new THREE.PlaneGeometry(10000, 10000, 1);\n\n\t\tthis.helperPlane = new THREE.Mesh(\n\t\t\tthis.groundFloor,\n\t\t\tnew THREE.MeshLambertMaterial({\n\t  \t\tcolor: 0x00ff00\n\t  \t})\n\t\t);\n\n\t\tthis.helperPlane.rotation.x = -Math.PI/2;\n    this.app.scene.add(this.helperPlane);\n\n  }\n\n\n  get3dPointZAxis(event) {\n      var vector = new THREE.Vector3(\n                  ( event.clientX / window.innerWidth ) * 2 - 1,\n                  - ( event.clientY / window.innerHeight ) * 2 + 1,\n                  0.5 );\n\n      vector.unproject( this.app.camera );\n      var dir = vector.sub( this.app.camera.position ).normalize();\n      var distance = - this.app.camera.position.z / dir.z;\n      var pos = this.app.camera.position.clone().add( dir.multiplyScalar( distance ) );\n      return pos;\n  }\n\n  renderPoints() {\n\n    if (this.points) {\n\n      this.app.scene.remove(this.mesh);\n\n\t\t\tvar shape = new THREE.Shape( this.points );\n      // var geometry = new THREE.ShapeGeometry( shape );\n\n      shape.autoClose = true;\n\t\t\tvar points = shape.createPointsGeometry();\n\t\t\tvar spacedPoints = shape.createSpacedPointsGeometry( 50 );\n\n      this.mesh = new THREE.Line( points, new THREE.LineBasicMaterial({ color: 0xce0000, linewidth: 3 }) );\n\t\t\t\t\t//line.position.set( this.mouse.x, 10, this.mouse.y );\n\t\t\tthis.mesh.rotation.x = Math.PI/2;\n\t\t\tthis.mesh.scale.set( 1, 1, 1 );\n\n\n\t\t\tthis.app.scene.add(this.mesh);\n\n      var p = JSON.stringify(this.points);\n      console.log(p);\n\n\n    }\n\n  }\n\n\n  onDocumentMouseDown(e) {\n\n\t\te.preventDefault();\n\t\tthis.updateMousePosition(e);\n\n    console.log('clickHelper clicked at', this.mouse);\n\n    if (this.connectPoints) {\n\n      var pos = this.get3dPointZAxis(e);\n      console.log(pos);\n\n      this.points.push( new THREE.Vector3(pos.x, -pos.y, 0) );\n\n      this.renderPoints();\n\n    }\n\n    var intersects = this.app.raycaster.intersectObject( this.helperPlane );\n\n    if ( intersects.length && intersects[0].object ) {\n\n      console.log('intersecting plane', intersects);\n\n    }\n\n\t}\n\n\n\tupdateMousePosition ( e ) {\n\n    this.mouse.x = ( e.clientX / $('#webgl-scene').width() ) * 2 - 1;\n\t\tthis.mouse.y = - ( e.clientY / $('#webgl-scene').height() ) * 2 + 1;\n\n\t}\n\n}\n","import Log from '../app/log';\nimport Utils from '../app/utils';\n\nexport default class Datetime {\n\n\n  constructor ( options = {} ) {\n\n    this.time = options.time;\n\n  }\n\n\n  setTime ( time ) {\n\n    this.time = time;\n\n  }\n\n\n  /**\n   * Retrieves a time based string in the format:\n   * ALso adds leading zeros.\n   * \n   * mm:ss => 00:00\n   */\n  getMinutesWithSeconds () {\n\n    let min = Math.floor(this.time / 60);\n    let sec = (this.time - min * 60).toFixed(0);\n\n    if (min < 10) {\n      min = '0' + min;\n    }\n\n    if (sec < 10) {\n      sec = '0' + sec;\n    }\n\n    return min + ':' + sec;\n\n  }\n\n\n}\n","//import THREE from 'three.js';\n\nimport Log from '../app/log';\nimport Utils from '../app/utils';\n\n\n/**\n * Helper class to define custom geometries used for THREE.js rendering\n */\nexport default class Geometry {\n\n\n  constructor ( options = {} ) {\n    this.options = options;\n    this.utils = new Utils();\n  }\n\n\n\trenderDashedCircle ( radius, color ) {\n\n\t\tif ( color == undefined )\n\t\t\tcolor = new THREE.Color('rgba(255, 255, 255, 0.75)');\n\n\t\tvar circleGeometry = new THREE.Geometry();\n\t\tvar verticesArray = circleGeometry.vertices;\n\t\tvar segments = 128;\n\t\tvar angle = 2 * Math.PI / segments;\n\n\t\tfor( var i = 0; i <= segments; i++ ) {\n\t    var x = radius * Math.cos(angle * i);\n\t    var y = radius * Math.sin(angle * i);\n\n\t    verticesArray.push( new THREE.Vector3(x, y, 0) );\n\t\t}\n\n\t\t// see: http://soledadpenades.com/articles/three-js-tutorials/drawing-the-coordinate-axes/\n\t\tvar circleMaterial = new THREE.LineDashedMaterial({\n\t\t\tcolor: 0x00FF00,\n\t\t\ttransparent: true,\n\t\t\topacity: 0.1,\n\t\t\tdashSize: this.utils.AU / 1000,\n\t\t\tgapSize: this.utils.AU / 1000\n\t\t});\n\n\t\tcircleGeometry.computeLineDistances();\n\n\t\tvar circleLine = new THREE.Line(circleGeometry, circleMaterial, THREE.LinePieces);\n\t\t\t\tcircleLine.position.set(0, 0, 0);\n\t\t\t\tcircleLine.rotation.set( -90 * Math.PI / 180, 0, 0 );\n\n\t\treturn circleLine;\n\t}\n\n}\n","\nexport default class Particle {\n\n  constructor ( options ) {\n\n    // define the position of the particle\n\t\tthis.position = options.vector;\n\n\t\t// initialize size with init value\n\t\tthis.size = 256;\n\n\t\t// field for additional \n\t\tthis.properties = {};\n  }\n\n}\n","//import THREE from 'three.js';\n\nimport Log from '../app/log';\nimport Utils from '../app/utils';\n\n\n/**\n * Helper class to define custom geometries used for THREE.js rendering\n */\nexport default class Text {\n\n\n  constructor ( options = {} ) {\n\n    this.options = options;\n    this.utils = new Utils();\n\n    this.app = options.app;\n    this.text = options.text;\n    this.color = options.color || 0x009000;\n    this.position = options.position;\n\n    this.font = './fonts/optimer_bold.typeface.json';\n    this.isCenter = options.isCenter || true;\n\n    this.material = new THREE.MeshPhongMaterial({\n      color: this.color,\n      shininess: 100\n    });\n\n    this.mesh;\n\n  }\n\n\n\trender () {\n\n\t\tthis.loader = new THREE.FontLoader();\n\t\tthis.loader.load(this.font, (font) => {\n\n\t    this.geometry = new THREE.TextGeometry( this.text, {\n\n\t      font: font,\n\n\t      size: .7,\n\t      height: .01,\n\t      curveSegments: 20,\n\t      weight: 'light',\n\n\t      bevelThickness: .03,\n\t      bevelSize: .01,\n\t      bevelEnabled: true\n\n\t    });\n\n\t    this.mesh = new THREE.Mesh(\n\t      this.geometry,\n\t      this.material\n\t    );\n\n\t    if (this.isCenter)\n    \t\tthis.center();\n\n\n    \tthis.mesh.castShadow = true;\n\n    \tif (this.options.group)\n    \t\tthis.options.group.add(this.mesh);\n\n\t\t});\n\n\n\t}\n\n\n\tcenter () {\n\n\t\tthis.geometry.computeBoundingBox();\n\t\tlet textWidth = this.geometry.boundingBox.max.x - this.geometry.boundingBox.min.x;\n\n    this.mesh.position.set( -0.5 * textWidth, .1, 0 );\n\n\t}\n\n\n\tgetMesh () {\n\n\t\treturn this.mesh;\n\n\t}\n\n\n}\n","//import THREE from 'three.js';\n\nimport Log from '../app/log';\nimport Utils from '../app/utils';\n\n\n/**\n * Helper class to define custom textures used for THREE.js rendering\n * Textures rendered to 2d canvas\n */\nexport default class Textures {\n\n\n  constructor ( options = {} ) {\n\n    this.options = options;\n    this.utils = new Utils();\n\n    this.canvas = null;\n    this.context = null;\n    this.size = 512\n\n  }\n\n\n  createCanvas (size = 128) {\n\n    this.size = size;\n    this.canvas = document.createElement( 'canvas' );\n    this.canvas.width = this.size;\n    this.canvas.height = this.size;\n\n  }\n\n\n  getCircleMaterial (size = 128) {\n\n    this.createCanvas(size);\n    this.context = this.canvas.getContext( '2d' );\n\n    this.context.beginPath();\n    this.context.arc(this.canvas.width, this.canvas.height, size/2, 0, 2 * Math.PI);\n    this.context.stroke();\n\n    return this.canvas;\n\n  }\n\n\n  updateCircleTexture (time, color = '#00ce00', glowColor = '#ffffff') {\n\n    let radius = Math.abs( this.size/2 * Math.sin(time.elapsedTime));\n\n    this.clearCanvas();\n\n    this.drawRadialGradient();\n\n    this.drawCircle(radius, 4, '#00ce00', 2, '#fff');\n    //this.drawCircle(radius/2, 8, '#00ce00');\n    //this.drawCircle(radius/6, 6, '#00ce00');\n\n  }\n\n\n  clearCanvas (clearColor = 'black') {\n\n    this.context.fillStyle = clearColor;\n    this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n  }\n\n\n  drawCircle ( radius = 10, lineWidth = 10, stroke = '#00ce00', shadowRadius, shadowColor) {\n\n    this.context.beginPath();\n\n    if (shadowRadius && shadowColor) {\n      this.context.shadowBlur = shadowRadius;\n      this.context.shadowColor = shadowColor;\n    }\n\n    this.context.lineWidth = lineWidth;\n    this.context.strokeStyle = stroke;\n    this.context.arc(this.canvas.width/2, this.canvas.width/2, radius, 0, 2 * Math.PI);\n    this.context.stroke();\n\n  }\n\n\n  drawRadialGradient() {\n\n    var gradient = this.context.createRadialGradient(\n\t\t\tthis.canvas.width / 2,\n\t\t\tthis.canvas.height / 2,\n\t\t\t0,\n\t\t\tthis.canvas.width / 2,\n\t\t\tthis.canvas.height / 2,\n\t\t\tthis.canvas.width / 2\n\t\t);\n\n\t\tgradient.addColorStop( 0.0, 'rgba(50, 200, 50, 1.0)');\n\t\tgradient.addColorStop( 0.85, 'rgba(25, 255, 25, 0.35)' );\n\t\tgradient.addColorStop( 1.0, 'rgba(0, 50, 0, 0.0)' );\n\n\t\tthis.context.fillStyle = gradient;\n\t\tthis.context.fillRect( 0, 0, this.canvas.width, this.canvas.height );\n\n  }\n\n\n  getStarMaterial ( showShininess ) {\n\n\t\t// create the star texture\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\t\t\tcanvas.width = 512;\n\t\t\t\tcanvas.height = 512;\n\n\t\t//var col = new THREE.Color(color);\n\t\tvar context = canvas.getContext( '2d' );\n\n\t\tvar gradient = context.createRadialGradient(\n\t\t\tcanvas.width / 2,\n\t\t\tcanvas.height / 2,\n\t\t\t0,\n\t\t\tcanvas.width / 2,\n\t\t\tcanvas.height / 2,\n\t\t\tcanvas.width / 2\n\t\t);\n\n\t\tgradient.addColorStop( 0, 'rgba(255, 255, 255, 1.0)');\n\t\tgradient.addColorStop( 0.05, 'rgba(205, 205, 224, 1.0)');\n\t\tgradient.addColorStop( 0.1, 'rgba(125, 100, 0, 0.35)' );\n\t\tgradient.addColorStop( 1.0, 'rgba(0,0,0,0.0)' );\n\n\t\tcontext.fillStyle = gradient;\n\t\tcontext.fillRect( 0, 0, canvas.width, canvas.height );\n\n\t\tif ( showShininess ) {\n\t\t\tcontext.beginPath();\n\t\t\tcontext.lineWidth = 2;\n\n\t\t\t// top - bottom\n      context.moveTo(canvas.width/2, 0);\n      context.lineTo(canvas.width/2, canvas.height);\n\n      // left - right\n      context.moveTo(0, canvas.height/2);\n      context.lineTo(canvas.width, canvas.height/2);\n\n      // set line color\n      context.strokeStyle = 'rgba(255,255,255,0.75)';\n      context.stroke();\n\t\t}\n\n\t\tvar texture = new THREE.Texture(canvas);\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\t}\n\n\n}\n","\n//import TemplateLevelStart from './dialog/level_start';\n//import TemplateLevelCompleted from './dialog/level_completed';\n\nexport default function template(data) {\n\n  console.log('rendering template with data', data);\n\n  return $(`\n\n    <div class=\"dialog\">\n\n      <div class=\"dialog-title\">${data.title}</div>\n\n      <div class=\"dialog-content\">${data.content}</div>\n\n    </div>\n\n  `);\n\n}\n","export default function template(data) {\n\n  console.log('rendering template with data', data);\n\n  return $(`\n    <div>\n\n      <h1>Level Solved</h1>\n\n      <p>\n        moves: ${data.moves} <br>\n        pushes: ${data.pushes} <br>\n        time: ${data.time}\n      </p>\n\n      <p>\n\n        <button\n          id=\"button-replay-level\"\n          class=\"button button-large button-game\"\n          data-handler=\"interactive\"\n          data-event=\"click\"\n          data-action=\"reload\"\n          title=\"Reload this level\">\n\n          <span class=\"fa fa-repeat\"></span>\n\n        </button>\n\n\n        <button\n          id=\"button-next-level\"\n          class=\"button button-large button-game\"\n          data-handler=\"interactive\"\n          data-event=\"click\"\n          data-action=\"loadNextLevel\"\n          title=\"Load next Level\">\n\n          <span class=\"fa fa-forward\"></span>\n\n        </button>\n\n      </p>\n\n    </div>\n  `);\n\n}\n","export default function template(data) {\n\n  console.log('rendering template with data', data);\n\n  return $(`\n    <div>\n\n      <p>The best result for this level was:</p>\n      <p>3:00 Min <br> 56 pushes <br> 143 moves </p>\n      <h3>Can you beat it?</h3>\n      <p>\n\n        <button\n          class=\"button button-large button-game\"\n          data-handler=\"interactive\"\n          data-event=\"click\"\n          data-action=\"start\"\n          data-scope=\"level\"\n          id=\"btn-start-game\">\n\n          Start Game\n\n        </button>\n\n      </p>\n\n    </div>\n  `);\n\n}\n","import View from '../app/view';\n\nexport default class Button extends View {\n\n\n  constructor ( options = {} ) {\n\n    super();\n\n    this.app = options.app;\n    this.name = options.name;\n    this.text = options.text;\n\n    this.object = options.object;\n    this.action = options.action;\n\n    this.isActive = false;\n\n    this.$template = $(`<button class=\"button button-round button-control button-inactive\">${this.text}</button>`);\n\n  }\n\n\n  render ($element = $('body')) {\n\n    $element.append( this.$template );\n    this.initEvents();\n\n  }\n\n\n  initEvents () {\n\n    this.$template.on('click', (e) => {\n\n      if (!this.isActive) return;\n\n      let $btn = $(e.currentTarget);\n      this.app.level[this.object][this.action]();\n\n    });\n\n  }\n\n\n  remove () {\n\n    this.$template.remove();\n\n  }\n\n\n  activate() {\n\n    this.isActive = true;\n    this.$template.addClass('button-animated');\n\n  }\n\n\n  deactivate() {\n\n    this.isActive = false;\n    this.$template.removeClass('button-animated');\n\n  }\n\n}\n","import View from '../app/view';\n\n// base template\nimport DialogTemplate from '../templates/dialog';\n\n// nested templates\nimport TemplateLevelStart from '../templates/dialog/level_start';\nimport TemplateLevelCompleted from '../templates/dialog/level_completed';\n\n\nexport default class Dialog extends View {\n\n\n  constructor ( options = {} ) {\n\n    super();\n\n    this.classes = {\n      TemplateLevelStart,\n      TemplateLevelCompleted\n    }\n\n    this.app = options.app;\n    this.data = options.data;\n\n    this.className = '.dialog';\n\n    this.prepareTemplate();\n    this.render();\n    this.initEvents();\n\n  }\n\n\n  prepareTemplate () {\n\n    // render main template with nested template\n    if (this.data.template) {\n\n      let nestedTemplate = new this.classes[this.data.template](this.data);\n      this.data.content = nestedTemplate.html();\n\n    }\n\n    this.$template = new DialogTemplate(this.data);\n\n  }\n\n\n  render () {\n\n    $('body').find(this.className).remove();\n    $('body').append(this.$template);\n\n    this.resizeToContent();\n\n  }\n\n\n  initEvents () {\n\n\n    this.$template.find('[data-handler]').each((i, item) => {\n\n      $(item).on( $(item).data('event') , (e) => {\n\n        e.preventDefault();\n\n        let $btn = $(e.currentTarget);\n        let action = $btn.data('action');\n\n        this.app[action]();\n        this.close();\n\n      });\n\n    });\n\n\n    /*\n    this.$template.find('.button-round').on('click', (e) => {\n\n      let $btn = $(e.currentTarget);\n      let resolution = $btn.data('resolution');\n\n      this.$template.find('.button-round').not(this).removeClass('active');\n      $btn.toggleClass('active');\n\n      this.action.scope.setResolution(resolution);\n\n      this.$template.find('.action-btn').removeClass('hidden');\n\n    });\n    */\n\n    /*\n    this.$template.find('.action-btn').on('click', (e) => {\n\n      this.close();\n      this.action.scope[this.action.function]();\n\n    });\n    */\n\n    /*\n    this.actions.forEach( (action) => {\n\n      $(action.id).on('click', (e) => {\n        e.preventDefault();\n\n        this.app[action.action]();\n        this.close();\n\n      });\n\n    });\n    */\n\n  }\n\n\n  resizeToContent() {\n\n    let contentWidth = this.$template.outerWidth();\n    let contentHeight = this.$template.outerHeight();\n\n    this.$template.css({\n      left: $(window).width() / 2 - (contentWidth/2),\n      top: $(window).height() / 2 - (contentHeight/2)\n    });\n\n  }\n\n\n  close () {\n\n    this.$template.remove();\n\n  }\n\n}\n","import View from '../app/view';\n\nimport Datetime from '../helpers/datetime';\n\nexport default class Interface extends View {\n\n\n  constructor ( options = {} ) {\n\n    super();\n\n    this.app = options.app;\n    this.datetime = new Datetime();\n\n    this.$template = $(`\n      <div id=\"interface\">\n\n        <div class=\"level\">\n          <span class=\"level-name\"></span>\n          <span class=\"level-difficulty\"></span>\n        </div>\n\n        <div class=\"time\">\n          <span class=\"icon\">Time: </span>\n          <span class=\"time-seconds\">00:00</span>\n        </div>\n\n        <div class=\"moves\">\n          <span class=\"icon\">Moves: </span>\n          <span class=\"number-moves\">0</span>\n        </div>\n\n        <div class=\"pushes\">\n          <span class=\"icon\">Pushes: </span>\n          <span class=\"number-pushes\">0</span>\n        </div>\n\n        <div class=\"icons\" title=\"How to play\">\n          <span class=\"icon icon-help\" data-action=\"openLightbox\">i</span>\n          <span class=\"icon icon-fullscreen\">fs</span>\n          <span class=\"icon icon-solver\" id=\"solver\">S</span>\n        </div>\n\n      </div>\n\n      <div id=\"items\">\n        <!--\n        <div class=\"item\">\n          <span class=\"icon\">Hammer: </span>\n          <span class=\"hammers-number\">0</span>\n        </div>\n        -->\n      </div>\n\n      <div id=\"buttons\"></div>\n\n      <div id=\"controls\">\n        <div class=\"button button-round button-control button-up\">up</div>\n        <div class=\"button button-round button-control button-left\">left</div>\n        <div class=\"button button-round button-control button-down\">down</div>\n        <div class=\"button button-round button-control button-right\">right</div>\n      </div>\n\n    `);\n\n  }\n\n\n  render () {\n\n    $('body').append( this.$template );\n\n    this.initEvents();\n\n  }\n\n\n  initEvents () {\n\n    this.$template.find('.button-up').on('click', (e) => {\n      this.app.level.character.move('up');\n    });\n\n    this.$template.find('.button-left').on('click', (e) => {\n      this.app.level.character.move('left');\n    });\n\n    this.$template.find('.button-down').on('click', (e) => {\n      this.app.level.character.move('down');\n    });\n\n    this.$template.find('.button-right').on('click', (e) => {\n      this.app.level.character.move('right');\n    });\n\n\n    this.$template.find('.icon-fullscreen').on('click', (e) => {\n\n      if (THREEx.FullScreen.available()) {\n\n        THREEx.FullScreen.activated() ? THREEx.FullScreen.cancel() : THREEx.FullScreen.request();\n\n      }\n\n    });\n\n\n\n\n  }\n\n\n  setLevelName (level) {\n\n    this.$template.find('.level-name').text( level.world + '@' + level.name);\n\n    if (level.difficulty) {\n      this.$template.find('.level-difficulty').text('('+ level.difficulty +' level)');\n    }\n\n  }\n\n\n  setMoves (moves) {\n\n    this.$template.find('.number-moves').text(moves);\n\n  }\n\n\n  setPushes (pushes) {\n\n    this.$template.find('.number-pushes').text(pushes);\n\n  }\n\n\n  updateTime ( time ) {\n\n    this.datetime.setTime(time);\n    this.$template.find('.time .time-seconds').text( this.datetime.getMinutesWithSeconds() );\n\n  }\n\n\n  remove () {\n\n    this.$template.remove();\n\n  }\n\n}\n","import View from '../app/view';\n\nexport default class Label extends View {\n\n\n  constructor ( options = {} ) {\n\n    super();\n\n    this.app = options.app;\n    this.data = options.data;\n    this.planetsystem = options.planetsystem;\n\n    this.planetsystemName = this.planetsystem.name.toLowerCase().replace(' ', '-');\n    this.planetName = this.data.name.toLowerCase().replace(' ', '-');\n\n    this.$template = $(`\n      <span class=\"label label-${this.planetsystemName} label-${this.planetName}\">\n        <span class=\"label-marker\"></span>\n        ${this.data.name}\n      </span>\n    `);\n\n    this.render();\n    this.initEvents();\n\n  }\n\n\n  render () {\n\n    this.$template.css({'color': '#' + this.utils.orbitColors[ this.app.systems.length ].toString(16) });\n\n    $('#labels').append( this.$template );\n\n  }\n\n\n  initEvents () {\n\n\n    this.$template.on('click', (e) => {\n\n      let $btn = $(e.currentTarget);\n\n      console.log('load planet data');\n\n    });\n\n\n    this.$template.on('mouseover', (e) => {\n\n      console.log('planet mouseover');\n\n    });\n\n    this.$template.on('mouseout', (e) => {\n\n      console.log('planet mouseout');\n\n    });\n\n  }\n\n\n  remove () {\n\n    this.$template.remove();\n\n  }\n\n\n  updatePosition (object) {\n\n    //let pos = window.utils.getPosition2D( mesh.parent.parent, self.camera, self.projector);\n    let pos = this.utils.toScreenPosition( object, this.app.camera );\n\n    this.$template.css({\n      'left': pos.x + 'px',\n      'top': pos.y + 'px'\n    });\n\n  }\n\n}\n","import Utils from '../app/utils';\n\nexport default class Template {\n\n\tconstructor ( options = {} ) {\n\n\t\tthis.utils = new Utils();\n\t\tthis.templates = [];\n\n\t\tthis.data = options.data;\n\t\tthis.template = options.template;\n\n\t\tthis.templates['tooltipStarTemplate'] = $(`\n\n\t\t\t<div class=\"headline\">${this.data.pl_hostname}</div>\n\n\t\t\t<div class=\"property\">\n\t\t\t  <div class=\"label\"><span>Type</span></div>\n\t\t\t  <div class=\"value\"><span>${this.data.type}</span></div>\n\t\t\t</div>\n\n\t\t\t<div class=\"property\">\n\t\t\t  <div class=\"label\"><span>Distance (Parsec)</span></div>\n\t\t\t  <div class=\"value\"><span>${this.data.dist}</span></div>\n\t\t\t</div>\n\n\t\t\t<div class=\"property\">\n\t\t\t  <div class=\"label\"><span>Distance (Light Years)</span></div>\n\t\t\t  <div class=\"value\"><span>${ (this.data.dist * this.utils.PC).toFixed(2) }</span></div>\n\t\t\t</div>\n\n\t\t\t<div class=\"property\">\n\t\t\t  <div class=\"label\"><span>Mass (Sun Masses)</span></div>\n\t\t\t  <div class=\"value\"><span>${this.data.mass}</span></div>\n\t\t\t</div>\n\n\t\t\t<div class=\"property\">\n\t\t\t  <div class=\"label\"><span>Radius (Sun Radii)</span></div>\n\t\t\t  <div class=\"value\"><span>${this.data.radius}</span></div>\n\t\t\t</div>\n\n\t\t\t<div class=\"property\">\n\t\t\t  <div class=\"label\"><span>Planets</span></div>\n\t\t\t  <div class=\"value\"><span>${this.data.pl_num}</span></div>\n\t\t\t</div>\n\n\t\t\t<div class=\"property\">\n\t\t\t  <div class=\"label\"><span>Habitable Planets</span></div>\n\t\t\t  <div class=\"value\"><span>${this.data.habitable}</span></div>\n\t\t\t</div>\n\n\t\t`);\n\n\t}\n\n\n\trender () {\n\n\t\treturn this.templates[this.template];\n\n\t}\n\n}\n","import View from '../app/view';\n\nimport Template from './template';\n\nexport default class Tooltip extends View {\n\n  constructor ( options = {} ) {\n\n    super();\n\n    this.template = options.template ? options.template : 'default';\n    this.$template = $('<div id=\"tooltip\"></div>');\n    this.render();\n  }\n\n\n  render () {\n\n    if (this.template)\n      console.log(this.template);\n\n    $('body').append(this.$template);\n\n  }\n\n\n  setData (data) {\n\n    let template = new Template({\n      template: 'tooltipStarTemplate',\n      data: data\n    });\n\n    this.$template.html( template.render() );\n\n  }\n\n\n  updatePosition (pos) {\n\n    this.$template.css({\n      left: pos.x + 18,\n      top: pos.y\n    });\n\n  }\n\n\n  remove (){\n\n    this.$template.remove();\n\n  }\n\n  show () {\n\n    this.$template.show();\n\n  }\n\n  hide () {\n\n    this.$template.hide();\n\n  }\n\n\n}\n"]}